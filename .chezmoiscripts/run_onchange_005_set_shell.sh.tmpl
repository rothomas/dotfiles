#!/usr/bin/env bash

source "{{ .chezmoi.sourceDir }}/.helpers/prereq_functions"
use_homebrew

current=$SHELL proposed="$(command -v {{ .shell }})"

if installed {{ .shell }}; then
  if grep $proposed /etc/shells; then
    if [[ "$current" != "$proposed" ]]; then
      chsh -s $proposed
    fi
  fi
fi

sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
git clone https://github.com/zsh-users/zsh-autosuggestions.git ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions


{{ if eq .chezmoi.os "darwin" -}}                                                                                                           
mkdir -p ~/.oh-my-zsh/custom/plugins/iterm2_shell_integration
curl -L https://iterm2.com/shell_integration/install_shell_integration.sh | bash
mv ~/.iterm2_shell_integration.zsh ~/.oh-my-zsh/custom/plugins/iterm2_shell_integration
{{ end }}

